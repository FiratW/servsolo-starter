<!doctype html><meta charset="utf-8">
<title>Servsolo Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<h1>Orders</h1>
<table border="1" cellpadding="6" cellspacing="0">
  <thead><tr><th>ID</th><th>Created</th><th>Total</th><th>Items</th></tr></thead>
  <tbody id="rows"></tbody>
</table>
<script>
async function load(){
  const r = await fetch('/api/orders');
  const data = await r.json();
  const tb = document.getElementById('rows');
  tb.innerHTML = data.map(o => {
    const items = o.items.map(it => {
      const mods = (it.modifiers||[]).flatMap(s=>s.modifier_ids||[]).join(',');
      return `${it.product_id} x${it.qty}${mods? ' ['+mods+']':''}`;
    }).join('<br>');
    return `<tr>
      <td>${o.id}</td>
      <td>${o.created_at||''}</td>
      <td>$${(o.total_cents/100).toFixed(2)}</td>
      <td>${items}</td>
    </tr>`;
  }).join('');
}
load();
setInterval(load, 4000);
</script>
